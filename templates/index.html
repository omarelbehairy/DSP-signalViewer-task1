<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div id="plot"></div>
    <button id="toggle-btn" onclick="togglePlot()">Start</button>
    <script>
        var plotDiv = document.getElementById('plot');
        var data = {{data|tojson}};
        var x = [];
        var y = data.map(function (x) {return x[1]; });
        var cnt = 0;
        var intervalId;

        function plot() {
            Plotly.newPlot(plotDiv, [{x: x, y: y}], {title: 'ECG Signal', scrollZoom: true, modeBar: {orientation: 'v'},
                                                      xaxis: {range: [Math.max(cnt - 100, 0), cnt]}});
        }

        function update() {
            // replace with code to get ECG 
            x.push(cnt);
            y.push();
            cnt++;
            plot();
        }

        function togglePlot() {
            var btn = document.getElementById('toggle-btn');
            if (intervalId) {
                // Stop plot updates
                clearInterval(intervalId);
                intervalId = null;
                btn.innerHTML = 'Start';
            } else {
                // Start plot updates
                intervalId = setInterval(update, 100);
                btn.innerHTML = 'Stop';
            }
        }

        // Start plot updates by default
        togglePlot();
    </script>
</body>
</html>
